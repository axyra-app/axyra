<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AXYRA - Dashboard Principal</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Estilos AXYRA -->
    <link rel="stylesheet" href="../../static/axyra-styles.css" />
    <link rel="stylesheet" href="../../static/responsive-styles.css" />
    <link rel="stylesheet" href="dashboard-styles.css" />

    <!-- Header Compartido AXYRA -->
    <script src="../../static/include-header.js"></script>
  </head>
  <body>
    <!-- Header Compartido AXYRA - Se insertar치 autom치ticamente -->

    <!-- Sistema de Notificaciones Profesionales -->
    <div id="notificacionesSistema" class="notificaciones-sistema">
      <div id="notificacion" class="notificacion">
        <div class="notificacion-icono">
          <i id="notificacionIcono" class="fas fa-info-circle"></i>
        </div>
        <div class="notificacion-contenido">
          <h4 id="notificacionTitulo">Notificaci칩n</h4>
          <p id="notificacionMensaje">Mensaje de la notificaci칩n</p>
        </div>
        <button class="notificacion-cerrar" onclick="cerrarNotificacion()">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>

    <!-- Contenido Principal -->
    <div class="dashboard-container">
      <!-- Header del Dashboard -->
      <div class="dashboard-header">
        <h1 class="dashboard-title">
          <i class="fas fa-tachometer-alt"></i>
          Dashboard Principal
        </h1>
        <p class="dashboard-subtitle">Vista consolidada de tu empresa en tiempo real</p>
        <div class="dashboard-actions">
          <button class="btn btn-primary" onclick="actualizarDashboard()">
            <i class="fas fa-sync-alt"></i> Actualizar
          </button>
          <button class="btn btn-secondary" onclick="exportarDashboard()">
            <i class="fas fa-download"></i> Exportar
          </button>
        </div>
      </div>

      <!-- M칠tricas Principales -->
      <div class="dashboard-metrics">
        <div class="metric-card primary">
          <div class="metric-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="metric-content">
            <h3 id="totalEmpleados">0</h3>
            <p>Total Empleados</p>
            <span class="metric-change positive" id="cambioEmpleados">+0%</span>
          </div>
        </div>

        <div class="metric-card success">
          <div class="metric-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="metric-content">
            <h3 id="horasMes">0.0</h3>
            <p>Horas del Mes</p>
            <span class="metric-change positive" id="cambioHoras">+0%</span>
          </div>
        </div>

        <div class="metric-card warning">
          <div class="metric-icon">
            <i class="fas fa-dollar-sign"></i>
          </div>
          <div class="metric-content">
            <h3 id="totalPagos">$0</h3>
            <p>Total Pagos</p>
            <span class="metric-change positive" id="cambioPagos">+0%</span>
          </div>
        </div>

        <div class="metric-card info">
          <div class="metric-icon">
            <i class="fas fa-file-invoice"></i>
          </div>
          <div class="metric-content">
            <h3 id="nominasGeneradas">0</h3>
            <p>N칩minas Generadas</p>
            <span class="metric-change positive" id="cambioNominas">+0%</span>
          </div>
        </div>

        <div class="metric-card secondary">
          <div class="metric-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="metric-content">
            <h3 id="promedioHoras">0.0</h3>
            <p>Promedio Horas</p>
            <span class="metric-change positive" id="cambioPromedio">+0%</span>
          </div>
        </div>

        <div class="metric-card dark">
          <div class="metric-icon">
            <i class="fas fa-building"></i>
          </div>
          <div class="metric-content">
            <h3 id="totalDepartamentos">0</h3>
            <p>Departamentos</p>
            <span class="metric-change positive" id="cambioDepartamentos">+0%</span>
          </div>
        </div>
      </div>

      <!-- Gr치ficos y An치lisis -->
      <div class="dashboard-charts">
        <div class="chart-container">
          <div class="chart-header">
            <h3><i class="fas fa-chart-pie"></i> Distribuci칩n de Empleados</h3>
            <div class="chart-actions">
              <button class="btn btn-sm btn-outline" onclick="toggleChartView('empleados')">
                <i class="fas fa-exchange-alt"></i>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <canvas id="empleadosChart" width="400" height="300"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <h3><i class="fas fa-chart-line"></i> Tendencia de Horas</h3>
            <div class="chart-actions">
              <button class="btn btn-sm btn-outline" onclick="toggleChartView('horas')">
                <i class="fas fa-exchange-alt"></i>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <canvas id="horasChart" width="400" height="300"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <h3><i class="fas fa-chart-bar"></i> Salarios por Departamento</h3>
            <div class="chart-actions">
              <button class="btn btn-sm btn-outline" onclick="toggleChartView('salarios')">
                <i class="fas fa-exchange-alt"></i>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <canvas id="salariosChart" width="400" height="300"></canvas>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-header">
            <h3><i class="fas fa-chart-doughnut"></i> Productividad General</h3>
            <div class="chart-actions">
              <button class="btn btn-sm btn-outline" onclick="toggleChartView('productividad')">
                <i class="fas fa-exchange-alt"></i>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <canvas id="productividadChart" width="400" height="300"></canvas>
          </div>
        </div>
      </div>

      <!-- Actividad Reciente -->
      <div class="dashboard-activity">
        <div class="activity-section">
          <h3><i class="fas fa-history"></i> Actividad Reciente</h3>
          <div class="activity-list" id="activityList">
            <!-- Las actividades se renderizar치n aqu칤 -->
          </div>
        </div>

        <div class="activity-section">
          <h3><i class="fas fa-tasks"></i> Tareas Pendientes</h3>
          <div class="task-list" id="taskList">
            <!-- Las tareas se renderizar치n aqu칤 -->
          </div>
        </div>
      </div>

      <!-- Estado del Sistema -->
      <div class="dashboard-system-status">
        <h3><i class="fas fa-server"></i> Estado del Sistema</h3>
        <div class="system-status-grid" id="systemStatusGrid">
          <!-- El estado del sistema se renderizar치 aqu칤 -->
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <!-- Firebase -->
    <script>
      // Configuraci칩n de Firebase
      const firebaseConfig = {
        apiKey: 'AIzaSyBXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
        authDomain: 'axyra-app.firebaseapp.com',
        projectId: 'axyra-app',
        storageBucket: 'axyra-app.appspot.com',
        messagingSenderId: '123456789012',
        appId: '1:123456789012:web:abcdefghijklmnop',
      };

      // Inicializar Firebase
      if (typeof firebase !== 'undefined') {
        firebase.initializeApp(firebaseConfig);
        console.log('游댠 Firebase inicializado correctamente');
      } else {
        console.warn('丘멆잺 Firebase no est치 disponible');
      }
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>

    <!-- Chart.js para gr치ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Scripts de la aplicaci칩n -->
    <script src="../../static/axyra-integration.js"></script>
    <script src="../../static/unified-auth-system.js"></script>
    <script src="dashboard.js"></script>
  </body>
</html>
